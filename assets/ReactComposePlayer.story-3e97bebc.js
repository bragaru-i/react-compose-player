import{r as a}from"./index-c013ead5.js";import{g as Q}from"./_commonjsHelpers-725317a4.js";var W={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z=a,B=Symbol.for("react.element"),ee=Symbol.for("react.fragment"),te=Object.prototype.hasOwnProperty,re=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ne={key:!0,ref:!0,__self:!0,__source:!0};function Y(e,t,r){var n,o={},s=null,i=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)te.call(t,n)&&!ne.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:B,type:e,key:s,ref:i,props:o,_owner:re.current}}P.Fragment=ee;P.jsx=Y;P.jsxs=Y;W.exports=P;var c=W.exports;const oe="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/WhatCarCanYouGetForAGrand.mp4";function _(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}var j={exports:{}},A={},X={exports:{}},G={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=a;function se(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ie=typeof Object.is=="function"?Object.is:se,ae=E.useState,ue=E.useEffect,ce=E.useLayoutEffect,le=E.useDebugValue;function de(e,t){var r=t(),n=ae({inst:{value:r,getSnapshot:t}}),o=n[0].inst,s=n[1];return ce(function(){o.value=r,o.getSnapshot=t,x(o)&&s({inst:o})},[e,r,t]),ue(function(){return x(o)&&s({inst:o}),e(function(){x(o)&&s({inst:o})})},[e]),le(r),r}function x(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ie(e,r)}catch{return!0}}function fe(e,t){return t()}var me=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fe:de;G.useSyncExternalStore=E.useSyncExternalStore!==void 0?E.useSyncExternalStore:me;X.exports=G;var pe=X.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T=a,ye=pe;function Se(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ge=typeof Object.is=="function"?Object.is:Se,Ee=ye.useSyncExternalStore,ve=T.useRef,_e=T.useEffect,he=T.useMemo,Re=T.useDebugValue;A.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var s=ve(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=he(function(){function u(p){if(!m){if(m=!0,d=p,p=n(p),o!==void 0&&i.hasValue){var g=i.value;if(o(g,p))return S=g}return S=p}if(g=S,ge(d,p))return g;var k=n(p);return o!==void 0&&o(g,k)?g:(d=p,S=k)}var m=!1,d,S,h=r===void 0?null:r;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,r,n,o]);var l=Ee(e,s[0],s[1]);return _e(function(){i.hasValue=!0,i.value=l},[l]),Re(l),l};j.exports=A;var Oe=j.exports;const K=Q(Oe),V=e=>{let t;const r=new Set,n=(u,m)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const S=t;t=m??typeof d!="object"?d:Object.assign({},t,d),r.forEach(h=>h(t,S))}},o=()=>t,l={setState:n,getState:o,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{r.clear()}};return t=e(n,o,l),l},Pe=e=>e?V(e):V,{useSyncExternalStoreWithSelector:Te}=K;function xe(e,t=e.getState,r){const n=Te(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return a.useDebugValue(n),n}function Ce(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const f=()=>[],J={currentTime:0,duration:0,volume:1,emitter:Ce(),buffered:[],isMuted:!1,isPlaying:!1,hasPlayedOrSeeked:!1,isReady:!1},Me={mute:f,pause:f,play:f,seek:f,setVolume:f,unmute:f,setDuration:f,getListener:()=>({addEventListener:f,removeEventListener:f}),setIsReady:f,setCurrentTime:f},De={playPromiseRef:{current:void 0},mediaContainerRef:{current:null},mediaElRef:{current:null},onStoreUpdate:f},N={...J,...Me,...De};function y(e){return("0"+e).slice(-2)}const $=(e,t=!0)=>{const r=Math.round(e/1e3),n=Math.floor(r/60),o=r%60,s=Math.floor(n/60),i=n%60;return s?t?`${s}:${y(i)}:${y(o)}`:`${y(s)}:${y(i)}:${y(o)}`:`${t?i:y(i)}:${y(o)}`},H=a.createContext({getState:()=>N,setState:()=>N,subscribe:()=>()=>[],destroy:()=>()=>[]}),we=e=>(t,r)=>xe(e,t,r),v=()=>{const e=a.useContext(H);if(!e)throw Error("useMediaStore cannot be used outside of the MediaProvider");return a.useMemo(()=>we(e),[])},Ie=a.memo(()=>{const e=v(),[t,r,n]=e(i=>[i.play,i.pause,i.isPlaying],_),o=()=>n?r():t(),s=()=>n?"Pause":"Play";return c.jsx("button",{onClick:o,children:s()})});function ke(e=!1){const[t,r]=a.useState(e),n=a.useMemo(()=>({on:()=>r(!0),off:()=>r(!1),toggle:()=>r(o=>!o)}),[]);return[t,n]}function Ve(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}const Ne=()=>{const e=v(),[t,r,n]=e(o=>[o.play,o.pause,o.isPlaying],Ve);return a.useCallback(()=>n?r():t(),[r,t,n])},$e=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Le=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,L=e=>$e.test(e)?"audio-file":Le.test(e)?"video-file":"unknown-media",C=a.memo(({className:e,url:t})=>{const r=v(),[n,o,s,i]=r(u=>[u.mediaElRef,u.setIsReady,u.isReady,u.setDuration],_);a.useEffect(()=>(o(!0),()=>o(!1)),[]),a.useEffect(()=>{var u;(u=n.current)==null||u.addEventListener("loadedmetadata",()=>{var d;const m=(d=n.current)==null?void 0:d.duration;m&&i(m)})},[s,n,i]);const l=a.useMemo(()=>{if(L(t)==="audio-file")return"audio";if(L(t)==="video-file")return"video";throw Error(`URL: ${t} has a media file that is not supported`)},[t]);return c.jsx(l,{controls:!1,ref:n,src:t,className:e})});try{C.displayName="MediaElement",C.__docgenInfo={description:`Component that:
- mounts video/audio tag
- set media duration`,displayName:"MediaElement",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const M=({children:e,classes:t,url:r})=>{const n=Ne(),o=v(),[s]=o(i=>[i.mediaContainerRef],_);return c.jsxs("div",{ref:s,className:t==null?void 0:t.wrapper,onClick:n,children:[c.jsx(C,{className:t==null?void 0:t.video,url:r}),e]})};try{M.displayName="MediaContainer",M.__docgenInfo={description:"",displayName:"MediaContainer",props:{classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"Classes"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const{useSyncExternalStoreWithSelector:qe}=K;function Ue(e,t=e.getState,r){const n=qe(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return a.useDebugValue(n),n}const q=e=>{const t=typeof e=="function"?Pe(e):e,r=(n,o)=>Ue(t,n,o);return Object.assign(r,t),r},be=e=>e?q(e):q,Fe=e=>()=>({...e}),ze=()=>J,We=(e,t)=>({getListener:()=>({addEventListener:t().emitter.on,removeEventListener:t().emitter.off}),mute:()=>e(r=>(r.emitter.emit("mute"),{isMuted:!0})),unmute:()=>e(r=>(r.emitter.emit("unnmute"),{isMuted:!1})),pause:()=>e(r=>{r.emitter.emit("pause");const n=r.mediaElRef.current;return n&&r.playPromiseRef.current&&r.playPromiseRef.current.then(()=>n.pause()),{isPlaying:!1}}),play:()=>e(r=>{if(!r.isReady)return console.warn("Play was called, but <Player /> is unmounted"),{isPlaying:!1};r.emitter.emit("play");const n=r.mediaElRef.current;return n&&(r.playPromiseRef.current=n.play(),n.play()),{isPlaying:!0,hasPlayedOrSeeked:!0}}),seek:r=>e(n=>{const o=n.mediaElRef.current;return!o||n.duration===void 0?{isPlaying:!1}:(r=Math.min(n.duration,Math.max(0,r)),n.emitter.emit("seeked",{diffMs:r}),o.currentTime=r,n.emitter.emit("timeupdate",{seconds:r,duration:n.duration}),{currentTime:r,hasPlayedOrSeeked:!0})}),setVolume:r=>e({volume:Math.min(Math.max(r,0),1)}),setIsReady:r=>e({isReady:r}),setDuration:r=>e(n=>{const o=r;return n.emitter.emit("durationchange",{duration:o}),n.duration===o?n:{duration:o,currentTime:0}}),setCurrentTime:r=>e({currentTime:r})}),Ye=e=>t=>(r,n,o)=>t(s=>{r(s),e==null||e(n())},n,o),je=({onStoreUpdate:e,...t})=>be()(Ye(e)((...r)=>({...ze(...r),...We(...r),...Fe(t)(...r)}))),D=a.memo(({children:e,onStoreUpdate:t})=>{const[r,n]=ke(!1),o=a.useRef(),s=a.useRef(null),i=a.useRef(null),l=a.useRef(je({playPromiseRef:o,mediaContainerRef:s,onStoreUpdate:t,mediaElRef:i})),u=a.useMemo(()=>l,[r]);return a.useEffect(()=>(n.on(),()=>n.off()),[n]),c.jsx(H.Provider,{value:u.current,children:e})});try{D.displayName="MediaProvider",D.__docgenInfo={description:"",displayName:"MediaProvider",props:{onStoreUpdate:{defaultValue:null,description:"",name:"onStoreUpdate",required:!1,type:{name:"((store: MediaStore) => void)"}}}}}catch{}const w=a.memo(({children:e,classes:t,url:r})=>c.jsx(D,{children:c.jsx(M,{url:r,classes:t,children:e})}));try{w.displayName="BasicPlayer",w.__docgenInfo={description:"Component that is basic for playing.",displayName:"BasicPlayer",props:{classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"Classes"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const Ae=50,I=a.memo(({progressInterval:e=Ae,children:t})=>{const r=v(),[n,o,s,i]=r(u=>[u.mediaElRef,u.setCurrentTime,u.isReady,u.isPlaying],_),l=a.useMemo(()=>s&&i&&!!n.current,[i,s,n]);return a.useEffect(()=>{if(!l)return;const u=setInterval(()=>{var d;const m=(d=n.current)==null?void 0:d.currentTime;m&&o(m)},e);return()=>clearInterval(u)},[l,n,e,o]),c.jsx(c.Fragment,{children:t})});try{I.displayName="CurrentTiming",I.__docgenInfo={description:`Component that adds current playing time to media player.
It is added to a separate component(not in basic), due to performance optimizations.`,displayName:"CurrentTiming",props:{progressInterval:{defaultValue:null,description:"",name:"progressInterval",required:!1,type:{name:"number"}}}}}catch{}const O=({children:e,currentTimingProps:t,...r})=>c.jsxs(w,{...r,children:[c.jsx(I,{...t}),e]});try{O.displayName="ReactComposePlayer",O.__docgenInfo={description:"ReactComposePlayer is a full ready-to-go component created for playing media-players",displayName:"ReactComposePlayer",props:{currentTimingProps:{defaultValue:null,description:"",name:"currentTimingProps",required:!1,type:{name:"CurrentTimingProps"}},classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"Classes"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const U=1e3,Xe=a.memo(()=>{const e=v(),[t,r]=e(n=>[n.currentTime,n.duration],_);return c.jsxs("div",{children:[$(t*U)," /",$(r*U)]})}),R=()=>{const[e,t]=a.useState(0);return c.jsxs(c.Fragment,{children:[c.jsxs(O,{url:oe,children:[c.jsx(Ie,{}),c.jsx(Xe,{})]}),c.jsxs("button",{onClick:()=>t(r=>r+1),children:["Count: ",e]})]})},Je={component:O,tags:["autodocs"]};var b,F,z;R.parameters={...R.parameters,docs:{...(b=R.parameters)==null?void 0:b.docs,source:{originalSource:`() => {
  const [count, setCount] = useState(0);
  return <>
      <ReactComposePlayer url={VIDEO_URL}>
        <PlayToggleButton />
        <CurrentTime />
      </ReactComposePlayer>
      <button onClick={() => setCount(prev => prev + 1)}>Count: {count}</button>
    </>;
}`,...(z=(F=R.parameters)==null?void 0:F.docs)==null?void 0:z.source}}};export{R as Primary,Je as default};
