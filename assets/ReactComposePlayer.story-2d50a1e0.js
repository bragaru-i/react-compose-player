import{r as a}from"./index-c013ead5.js";import{g as B}from"./_commonjsHelpers-725317a4.js";var X={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee=a,te=Symbol.for("react.element"),re=Symbol.for("react.fragment"),ne=Object.prototype.hasOwnProperty,se=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oe={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)ne.call(t,n)&&!oe.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:te,type:e,key:i,ref:o,props:s,_owner:se.current}}T.Fragment=re;T.jsx=j;T.jsxs=j;X.exports=T;var l=X.exports;const ie="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/WhatCarCanYouGetForAGrand.mp4";var G={exports:{}},Y={},A={exports:{}},K={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=a;function ae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ue=typeof Object.is=="function"?Object.is:ae,ce=E.useState,le=E.useEffect,de=E.useLayoutEffect,fe=E.useDebugValue;function me(e,t){var r=t(),n=ce({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return de(function(){s.value=r,s.getSnapshot=t,P(s)&&i({inst:s})},[e,r,t]),le(function(){return P(s)&&i({inst:s}),e(function(){P(s)&&i({inst:s})})},[e]),fe(r),r}function P(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ue(e,r)}catch{return!0}}function pe(e,t){return t()}var ye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pe:me;K.useSyncExternalStore=E.useSyncExternalStore!==void 0?E.useSyncExternalStore:ye;A.exports=K;var ge=A.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O=a,Se=ge;function ve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ee=typeof Object.is=="function"?Object.is:ve,he=Se.useSyncExternalStore,_e=O.useRef,Re=O.useEffect,Te=O.useMemo,Oe=O.useDebugValue;Y.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=_e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Te(function(){function u(p){if(!f){if(f=!0,d=p,p=n(p),s!==void 0&&o.hasValue){var v=o.value;if(s(v,p))return S=v}return S=p}if(v=S,Ee(d,p))return v;var V=n(p);return s!==void 0&&s(v,V)?v:(d=p,S=V)}var f=!1,d,S,h=r===void 0?null:r;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,r,n,s]);var c=he(e,i[0],i[1]);return Re(function(){o.hasValue=!0,o.value=c},[c]),Oe(c),c};G.exports=Y;var xe=G.exports;const J=B(xe),N=e=>{let t;const r=new Set,n=(u,f)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const S=t;t=f??typeof d!="object"?d:Object.assign({},t,d),r.forEach(h=>h(t,S))}},s=()=>t,c={setState:n,getState:s,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{r.clear()}};return t=e(n,s,c),c},Pe=e=>e?N(e):N,{useSyncExternalStoreWithSelector:Me}=J;function Ce(e,t=e.getState,r){const n=Me(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return a.useDebugValue(n),n}function we(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(s){s(r)}),(n=e.get("*"))&&n.slice().map(function(s){s(t,r)})}}}const m=()=>[],H={currentTime:0,duration:0,volume:1,emitter:we(),buffered:[],isMuted:!1,isPlaying:!1,hasPlayedOrSeeked:!1,isReady:!1},Ie={mute:m,pause:m,play:m,seek:m,setVolume:m,unmute:m,setDuration:m,getListener:()=>({addEventListener:m,removeEventListener:m}),setIsReady:m,setCurrentTime:m},De={playPromiseRef:{current:void 0},mediaContainerRef:{current:null},mediaElRef:{current:null},onStoreUpdate:m},$={...H,...Ie,...De};function y(e){return("0"+e).slice(-2)}const L=(e,t=!0)=>{const r=Math.round(e/1e3),n=Math.floor(r/60),s=r%60,i=Math.floor(n/60),o=n%60;return i?t?`${i}:${y(o)}:${y(s)}`:`${y(i)}:${y(o)}:${y(s)}`:`${t?o:y(o)}:${y(s)}`},Q=a.createContext({getState:()=>$,setState:()=>$,subscribe:()=>()=>[],destroy:()=>()=>[]}),ke=e=>(t,r)=>Ce(e,t,r),g=()=>{const e=a.useContext(Q);if(!e)throw Error("useMediaStore cannot be used outside of the MediaProvider");return a.useMemo(()=>ke(e),[])};function Ve(e=!1){const[t,r]=a.useState(e),n=a.useMemo(()=>({on:()=>r(!0),off:()=>r(!1),toggle:()=>r(s=>!s)}),[]);return[t,n]}function Ne(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}const Z=()=>{const e=g(),[t,r,n]=e(s=>[s.play,s.pause,s.isPlaying],Ne);return a.useCallback(()=>n?r():t(),[r,t,n])},$e=a.memo(()=>{const e=Z(),r=g()(s=>s.isPlaying),n=()=>r?"Pause":"Play";return l.jsx("button",{onClick:e,children:n()})});function x(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,s]of e)if(!Object.is(s,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Object.is(e[r[n]],t[r[n]]))return!1;return!0}const Le=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Ue=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,U=e=>Le.test(e)?"audio-file":Ue.test(e)?"video-file":"unknown-media",M=a.memo(({className:e,url:t})=>{const r=g(),[n,s,i,o]=r(u=>[u.mediaElRef,u.setIsReady,u.isReady,u.setDuration],x);a.useEffect(()=>(s(!0),()=>s(!1)),[]),a.useEffect(()=>{var u;(u=n.current)==null||u.addEventListener("loadedmetadata",()=>{var d;const f=(d=n.current)==null?void 0:d.duration;f&&o(f)})},[i,n,o]);const c=a.useMemo(()=>{if(U(t)==="audio-file")return"audio";if(U(t)==="video-file")return"video";throw Error(`URL: ${t} has a media file that is not supported`)},[t]);return l.jsx(c,{controls:!1,ref:n,src:t,className:e})});try{M.displayName="MediaElement",M.__docgenInfo={description:`Component that:
- mounts video/audio tag
- set media duration`,displayName:"MediaElement",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const C=({children:e,classes:t,url:r})=>{const n=Z(),s=g(),[i]=s(o=>[o.mediaContainerRef],x);return l.jsxs("div",{ref:i,className:t==null?void 0:t.wrapper,onClick:n,children:[l.jsx(M,{className:t==null?void 0:t.video,url:r}),e]})};try{C.displayName="MediaContainer",C.__docgenInfo={description:"",displayName:"MediaContainer",props:{classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"Classes"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const{useSyncExternalStoreWithSelector:be}=J;function qe(e,t=e.getState,r){const n=be(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return a.useDebugValue(n),n}const b=e=>{const t=typeof e=="function"?Pe(e):e,r=(n,s)=>qe(t,n,s);return Object.assign(r,t),r},Fe=e=>e?b(e):b,We=e=>()=>({...e}),ze=()=>H,Xe=(e,t)=>({getListener:()=>({addEventListener:t().emitter.on,removeEventListener:t().emitter.off}),mute:()=>e(r=>(r.emitter.emit("mute"),{isMuted:!0})),unmute:()=>e(r=>(r.emitter.emit("unnmute"),{isMuted:!1})),pause:()=>e(r=>{r.emitter.emit("pause");const n=r.mediaElRef.current;return n&&r.playPromiseRef.current&&r.playPromiseRef.current.then(()=>n.pause()),{isPlaying:!1}}),play:()=>e(r=>{if(!r.isReady)return console.warn("Play was called, but <Player /> is unmounted"),{isPlaying:!1};r.emitter.emit("play");const n=r.mediaElRef.current;return n&&(r.playPromiseRef.current=n.play(),n.play()),{isPlaying:!0,hasPlayedOrSeeked:!0}}),seek:r=>e(n=>{const s=n.mediaElRef.current;return!s||n.duration===void 0?{isPlaying:!1}:(r=Math.min(n.duration,Math.max(0,r)),n.emitter.emit("seeked",{diffMs:r}),s.currentTime=r,s.buffered.end(0)>r&&(s.preload="metadata"),n.emitter.emit("timeupdate",{seconds:r,duration:n.duration}),{currentTime:r,hasPlayedOrSeeked:!0})}),setVolume:r=>e({volume:Math.min(Math.max(r,0),1)}),setIsReady:r=>e({isReady:r}),setDuration:r=>e(n=>{const s=r;return n.emitter.emit("durationchange",{duration:s}),n.duration===s?n:{duration:s,currentTime:0}}),setCurrentTime:r=>e({currentTime:r})}),je=e=>t=>(r,n,s)=>t(i=>{r(i),e==null||e(n())},n,s),Ge=({onStoreUpdate:e,...t})=>Fe()(je(e)((...r)=>({...ze(...r),...Xe(...r),...We(t)(...r)}))),w=a.memo(({children:e,onStoreUpdate:t})=>{const[r,n]=Ve(!1),s=a.useRef(),i=a.useRef(null),o=a.useRef(null),c=a.useRef(Ge({playPromiseRef:s,mediaContainerRef:i,onStoreUpdate:t,mediaElRef:o})),u=a.useMemo(()=>c,[r]);return a.useEffect(()=>(n.on(),()=>n.off()),[n]),l.jsx(Q.Provider,{value:u.current,children:e})});try{w.displayName="MediaProvider",w.__docgenInfo={description:"",displayName:"MediaProvider",props:{onStoreUpdate:{defaultValue:null,description:"",name:"onStoreUpdate",required:!1,type:{name:"((store: MediaStore) => void)"}}}}}catch{}const I=a.memo(({children:e,classes:t,url:r})=>l.jsx(w,{children:l.jsx(C,{url:r,classes:t,children:e})}));try{I.displayName="BasicPlayer",I.__docgenInfo={description:"Component that is basic for playing.",displayName:"BasicPlayer",props:{classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"Classes"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const D=50,k=a.memo(({progressInterval:e=D})=>{const t=g(),[r,n,s,i]=t(c=>[c.mediaElRef,c.setCurrentTime,c.isReady,c.isPlaying],x),o=a.useMemo(()=>s&&i&&!!r.current,[i,s,r]);return a.useEffect(()=>{if(!o)return;const c=setInterval(()=>{var f;const u=(f=r.current)==null?void 0:f.currentTime;u&&n(u)},e);return()=>clearInterval(c)},[o,r,e,n]),null});try{k.displayName="CurrentTiming",k.__docgenInfo={description:`Component that adds current playing time to media player.
It is added to a separate component(not in basic), due to performance optimizations.`,displayName:"CurrentTiming",props:{progressInterval:{defaultValue:null,description:"",name:"progressInterval",required:!1,type:{name:"number"}}}}}catch{}const R=({children:e,progressInterval:t,...r})=>l.jsxs(I,{...r,children:[l.jsx(k,{progressInterval:t}),e]});try{R.displayName="ReactComposePlayer",R.__docgenInfo={description:"ReactComposePlayer is a full ready-to-go component created for playing media-players",displayName:"ReactComposePlayer",props:{progressInterval:{defaultValue:null,description:"",name:"progressInterval",required:!1,type:{name:"number"}},classes:{defaultValue:null,description:"",name:"classes",required:!1,type:{name:"Classes"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const q=1e3,Ye=a.memo(({className:e})=>{const t=g(),[r,n]=t(s=>[s.currentTime,s.duration],x);return l.jsxs("div",{className:e,children:[L(r*q)," /",L(n*q)]})}),Ae=()=>{const e=g(),[t,r,n]=e(o=>[o.currentTime,o.duration,o.seek]),s=()=>{if(r===0)return 0;const o=t/r*100;return Math.min(100,Math.max(0,o))},i=o=>{const c=o.currentTarget,d=(o.clientX-c.getBoundingClientRect().left)/c.offsetWidth*100/100*r;n(d)};return l.jsx("div",{style:{position:"relative",height:"3px",background:"grey",width:"100%",cursor:"pointer"},onClick:i,children:l.jsx("div",{style:{width:`${s()}%`,height:"3px",background:"blue"}})})};const He={component:R,render:({progressInterval:e,url:t})=>l.jsx(R,{url:t,classes:{wrapper:"video-wrapper",video:"video"},progressInterval:e,children:l.jsxs("div",{className:"controls",onClick:r=>{r.stopPropagation()},children:[l.jsx(Ye,{className:"current-time"}),l.jsx($e,{}),l.jsx(Ae,{})]})})},_={args:{progressInterval:D,url:ie},argTypes:{classes:{name:"classes",description:"Classes used for styling `<video>` tag and the `<div>` that wraps it"},progressInterval:{name:"progressInterval",description:"Re-rendering player every `progressInterval` seconds. Used to get timing for `<CurrentTiming />` component.",defaultValue:{summary:D}},url:{name:"url",description:"URL for the media to be played."}},parameters:{controls:{expanded:!0}}};var F,W,z;_.parameters={..._.parameters,docs:{...(F=_.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    progressInterval: PROGRESS_TIMEOUT,
    url: VIDEO_URL
  },
  argTypes: {
    classes: {
      name: 'classes',
      description: 'Classes used for styling \`<video>\` tag and the \`<div>\` that wraps it'
    },
    progressInterval: {
      name: 'progressInterval',
      description: 'Re-rendering player every \`progressInterval\` seconds. Used to get timing for \`<CurrentTiming />\` component.',
      defaultValue: {
        summary: PROGRESS_TIMEOUT
      }
    },
    url: {
      name: 'url',
      description: 'URL for the media to be played.'
    }
  },
  parameters: {
    controls: {
      expanded: true
    }
  }
}`,...(z=(W=_.parameters)==null?void 0:W.docs)==null?void 0:z.source}}};export{_ as Basic,He as default};
